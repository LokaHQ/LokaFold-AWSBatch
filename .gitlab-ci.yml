default:
  image: python:latest

include:
  - template: Secret-Detection.gitlab-ci.yml

stages:
  - test

before_script:
  - python --version  # For debugging
  - pip install virtualenv
  - virtualenv venv
  - source venv/bin/activate
  - pip install cfn-lint
  - pip freeze

cfn-lint:
  stage: test
  script:
  - cfn-lint -I infrastructure/cfn.yaml

secret_detection:
  variables:
    GIT_DEPTH: 100